# Абодо Брис - ИТМО
## Описание задачи

Написать два Dockerfile – плохой и хороший. Описать все плохие практики из кода плохого Dockerfile и почему они плохие, как они были исправлены в хорошем Dockerfile. Также указать две плохие практики по использованию контейнеров и два случая, когда не стоит использовать контейнеры в целом.

## Приложение

Для примера используется приложение JupyterHub.

### Плохий Dockerfile
![Screenshot 2024-05-18 224053](https://github.com/boodscode237/containers_in_docker/assets/65740750/8f358790-a8d0-4c72-923d-c59336d9182c)


### Хороший Dockerfile


![Screenshot 2024-05-18 223656](https://github.com/boodscode237/containers_in_docker/assets/65740750/9fcf7c87-6874-4dde-a47e-1a3dc4b4a6d2)
![Screenshot 2024-05-18 222146](https://github.com/boodscode237/containers_in_docker/assets/65740750/7ab45f7c-4ee9-47eb-bcbe-de8825c2c0d9)

### Хорошие практики
1. Объединение RUN команд: Объединение всех установок в один слой уменьшает размер образа и ускоряет его сборку.
2. Очистка кеша apt: Очистка кеша apt после установки пакетов уменьшает размер образа.
3. Использование непривилегированного пользователя: Создание и использование непривилегированного пользователя повышает безопасность, уменьшая риски при взломе контейнера.
4. Указание рабочего каталога: Установка рабочего каталога для нового пользователя улучшает структуру и организацию файлов внутри контейнера.

### Плохие практики в плохом Dockerfile

1. **Установка зависимостей в нескольких RUN командах**:
    - Почему это плохо: Каждая команда RUN создает новый слой в Docker образе, увеличивая его размер.
    - Исправление: Объединение всех установок в одну RUN команду и удаление ненужных файлов (например, кэш пакетов).

2. **Работа под root пользователем**:
    - Почему это плохо: Работа под root пользователем в контейнере увеличивает риск безопасности.
    - Исправление: Создание и использование непривилегированного пользователя для запуска приложения.

3. **Использование рабочего каталога /root**:
    - Почему это плохо: Использование каталога root пользователя может привести к проблемам с правами доступа и безопасности.
    - Исправление: Использование домашнего каталога нового непривилегированного пользователя.

### Плохие практики по использованию контейнеров

1. **Сохранение состояния внутри контейнера**:
    - Почему это плохо: Контейнеры предназначены быть статeless и ephemeral. Состояние должно сохраняться снаружи контейнера (например, в volumes или внешних хранилищах).
    - Исправление: Использование volumes для хранения данных, которые должны быть постоянными.

2. **Отсутствие мониторинга и логирования контейнеров**:
    - Почему это плохо: Без мониторинга и логирования сложно управлять контейнерами и устранять проблемы.
    - Исправление: Настройка систем мониторинга и логирования, таких как Prometheus и Grafana, для наблюдения за состоянием контейнеров.

### Когда не стоит использовать контейнеры

1. **Приложения с высокими требованиями к производительности**:
    - Например, приложения, которые требуют прямого доступа к оборудованию или низкой задержки, могут лучше работать без контейнеров, так как контейнеризация может добавить некоторую накладные расходы.

2. **Приложения с сложной конфигурацией и зависимостями, которые сложно контейнеризировать**:
    - Например, крупные монолитные приложения или системы с устаревшими зависимостями, которые трудно упаковать в контейнер. В таких случаях может быть проще использовать традиционные методы развертывания.
